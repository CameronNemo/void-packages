# Template file for 'anbox-modules-git'
pkgname=anbox-modules-git
version=0.0.0.20180908
revision=1
_commit=27fd47e11ef6eef93738f8f3df3e42c88975544e
wrksrc="${pkgname%-git}-${_commit}"
conf_files="/etc/modules-load.d/anbox.conf"
short_desc="Anbox kernel modules"
maintainer="Cameron Nemo <camerontnorman@gmail.com>"
license="GPL-2.0-only"
homepage="https://anbox.io/"
distfiles="https://github.com/anbox/anbox-modules/archive/${_commit}.tar.gz"
checksum=eec9ceb0e78f6556fbfc2b56f2f186ceedb493c6251711009b0535c3be059293

dkms_modules="anbox-ashmem ${version} anbox-binder ${version}"

do_install() {
	vinstall anbox.conf 644 etc/modules-load.d
	vinstall 99-anbox.rules 644 usr/lib/udev/rules.d
	for mod in ashmem binder; do
		moddir="usr/src/anbox-${mod}-${version}"
		vmkdir "${moddir}"
		vcopy "${mod}/*" "${moddir}"
	done
}
